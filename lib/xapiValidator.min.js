!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.xapiValidator=e()}}(function(){return function e(i,r,a){function t(s,T){if(!r[s]){if(!i[s]){var p="function"==typeof require&&require;if(!T&&p)return p(s,!0);if(o)return o(s,!0);var n=new Error("Cannot find module '"+s+"'");throw n.code="MODULE_NOT_FOUND",n}var E=r[s]={exports:{}};i[s][0].call(E.exports,function(e){var r=i[s][1][e];return t(r?r:e)},E,E.exports,e,i,r,a)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<a.length;s++)t(a[s]);return t}({1:[function(e,i,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=Object.freeze({MAY_VIOLATION:"MAY_VIOLATION",MUST_VIOLATION:"MUST_VIOLATION",SHOULD_VIOLATION:"SHOULD_VIOLATION"}),t=Object.freeze({ACTIVITIES_MUST_NOT_BE_NULL_MAP_OBJECTS:"Activities must be non-null map objects",ACTOR_MUST_BE_PROVIDED:"Actor must be provided.",AGENT_IFI_PROPERTIES_MUST_BE_SPECIFIED:'Exactly one Inverse Functional Identifier property must be specified for an "agent".',AGENT_MUST_BE_NON_NULL_MAP_OBJECT:'"agent" must be a non-null map object',AGENT_MUST_NOT_HAVE_GROUP_CHARACTERISTICS:"Invalid object with characteristics of a Group when an Agent was expected.",ATTACHMENTS_MUST_BE_NOT_NULL_ARRAY:'"attachments" must be a non-null Array.',ATTACHMENTS_MUST_NOT_BE_NULL_MAP_OBJECTS:'"attachment" instances must be non-null map objects.',AUTHORITY_MUST_BE_NON_NULL_MAP_OBJECT:'If present, the "authority" property must be a non-null map object.',CONTEXT_ACTIVITIES_MUST_BE_ARRAY_OR_ACTIVITY_OBJ:"Context Activities property values must be an array of Activity Objects or a single Activity Object.",CONTEXT_ACTIVITIES_MUST_BE_NON_NULL_MAP_OBJECT:"The Context Activities instances must be a non-null map object.",CONTEXT_ACTIVITIES_MUST_NOT_BE_NULL:'"Context Activities" property values must not be null.',CONTEXT_ACTIVITIES_SHOULD_BE_AN_ARRAY:"Context Activities property values should prefer to be an array of Activities rather than a single Activity object.",CONTEXT_MUST_BE_NON_NUL_MAP_OBJECT:'If present, the "context" property must be a non-null map object.',CORRECT_RESPONSES_PATTERN_MUST_BE_ARRAY:'If present, the "correctResponsesPattern" value must be an Array of strings.',CORRECT_RESPONSES_PATTERN_MUST_BE_STRINGS:'"correctResponsesPattern" items must be strings.',DATE_MUST_BE_VALID:"This propertys string value must be conformant to ISO 8601 for Date Times.",DATE_SHOULD_INCLUDE_ZONE_INFORMATION:"ISO 8601 date time strings used in the xAPI should include time zone information.",DEFINITIONS_MUST_BE_OBJECTS:'"definitions", when present, must be map objects',DISPLAY_SHOULD_BE_PROVIDED:'"display" property should be provided.',DURATION_MUST_BE_VALID:'If present, the "duration" property value must be an ISO 8601 duration',EXTENSIONS_MUST_NOT_BE_NULL:"If present, the extensions property must be a non-null map object.",GROUP_AUTHORITY_AGENT_MEMBERS_MUST_BE_TWO:'If used as a Group, the "authority" property must contain a "member" property that is an array containing exactly two Agent objects.',GROUP_IFI_PROPERTIES_MUST_BE_SPECIFIED:'Exactly one Inverse Functional Identifier property must be specified for a "group".',GROUP_MEMBER_MUST_BE_ARRAY:"If present, the member property of a Group must be an Array",GROUP_MUST_BE_NON_NULL_MAP_OBJECT:'"group" must be a non-null map object',ID_MUST_BE_UNIQUE:'"id" properties must be unique within each interaction component array',ID_MUST_BE_VALID_UUID_REF:'"id" property value must be a valid UUID string for statement reference objects.',ID_MUST_BE_VALID:"Id was not a valid UUID",ID_SHOULD_NOT_CONTAIN_WHITESPACES:'"id" properties on interaction components should not contain whitespace',IDS_SHOULD_BE_GENERATED_BY_LRS:"Ids should be generated by the Activity Provider, and must be generated by the LRS",IFI_MUST_BE_MBOX_URI:'"mbox" property was required to be a mailto URI string but was not a string at all.',IFI_MUST_BE_VALID_MBOX_FORMAT:'"mbox" property was required to be a mailto URI string but did not match the mailto format.',INTERACTION_ACTIVITY_SHOULD_HAVE:"Interaction Activity Definitions should have a type property of",INTERACTION_COMPONENT_MUST_NOT_BE_NULL:"This interaction component collection member must be a non-null map object",INTERACTION_COMPONENT_SHOULD_BE_ARRAY:"This interaction component collection property should be an array.",INTERACTION_TYPE_MUST_BE_CMI:'If present, the "interactionType" value must be a CMI interaction type option.',INTERACTION_TYPE_MUST_BE_VALID:"This interaction component collection property is not associated with the present interactionType of: ",INVALID_JSON:"Invalid JSON. The statement could not be parsed.",LANGUAGE_MAP_KEY_INVALID:"key, Language does not conform to RFC 5646",LANGUAGE_MAP_KEY_MUST_BE_STRING:"key: Language Map value should be a String, but was not",LANGUAGE_MAPS_MUST_NOT_BE_NULL:"Language Maps, when present, must be non-null map objects",LANGUAGE_MUST_BE_STRING:"The language property must be encoded as an RFC 5646 compliant string, but was not.",LENGTH_MUST_BE_INTEGER:'"length" property must be provided with an integer value',MAX_MUST_BE_GREATER_THAN_MIN:'If both "max" and "min" are present, the max property value should be greater than min',MEMBER_MUST_BE_PROVIDED_FOR_ANONYMOUS_GROUPS:'"member" property must be provided for Anonymous Groups.',MUST_BE_BOOLEAN_PRESENT:"property was required to be a Boolean but was absent.",MUST_BE_BOOLEAN:"property, if present, must be a Boolean.",MUST_BE_IRI_STRING:"property, if present, should be a IRI-like absolute URI per RFC 3987.",MUST_BE_NUMBER_PRESENT:"property was required to be a Number but was absent.",MUST_BE_NUMBER:"property, if present, must be a Number.",MUST_BE_PRESENT:"property was required to be a string but was absent.",MUST_BE_STRING:"property, if present, must be a string.",MUST_BE_URI_PRESENT:"property was required to be a URI string but was absent.",MUST_BE_URI_STRING:"property, if present, must be a URI string.",OBJECT_MUST_BE_DEFINED:'"object" property must be provided.',OBJECT_MUST_BE_NON_NULL_MAP_OBJECT:'"object" property must be a non-null map object.',OBJECT_TYPE_MUST_BE_STATEMENT_REF:'"objectType" property value must be "StatementRef" for statement reference objects.',OBJECT_TYPE_MUST_BE_VALID_OPTION:'object\'s "objectType" did not match a valid option',RAW_MUST_BE_GREATER_THAN_MIN:'If both "raw" and "min" are present, the raw property value should be greater than min',RAW_MUST_BE_LESS_THAN_MAX:'If both "raw" and "max" are present, the raw property value should be less than max',REGISTRATION_MUST_BE_UUID_STRING:"If present, the registration property must be a UUID string.",RESULT_MUST_BE_MAP_OBJECT:"If present, the result must be a map object",REVISION_MUST_BE_AGENT_OR_GROUP:"The revision property must not be used if the Statement's Object is an Agent or Group.",SCALED_MUST_BE_BETWEEN_0_1:"If present, the scaled property value must be between 0 and 1",SHA2_MUST_BE_PROVIDED_ON_ATTACHMENT_OBJECTS:'"sha2" property must be provided on attachment objects',SHA2_MUST_CONTAIN_BASE_64_STRING:'"sha2" property must contain a string with base64 contents',STATEMENT_ARGUMENT_IS_NOT_VALID:"Statement argument provided was not a valid object or a valid JSON string.",STATEMENT_ARGUMENT_MUST_BE_PROVIDED:"No statement argument provided.",STATEMENT_MUST_BE_PARSED_CORRECTLY:"Null or non-object statement value parsed from provided statment JSON.",STATEMENT_MUST_NOT_BE_NULL:"Null statement argument provided.",STATEMENT_REF_MUST_NOT_BE_NULL_MAP_OBJECTS:"StatementRef instances must be non-null map objects",SUB_STATEMENT_MUST_NOT_CONTAIN_SUB_STATEMENT:"A SubStatement must not contain a SubStatement",UNEXPECTED:"Unexpected property not permitted",VERB_MUST_BE_PROVIDED:"Verb must be provided",VERB_MUST_NOT_BE_NULL:"Verb property value must a non-null map object.",VERSION_MUST_COMPLY_SEMANTIC_VERSIONING:'"version" must be a non-null string that complies with Semantic Versioning 1.0.0'});r.xapiErrorLevels=a,r.xapiValidationErrors=t},{}],2:[function(e,i,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=Object.freeze({FIRST_REPORT_VERSTION:"1.0.0",GROUP_AUTHORITY_AGENT_MEMBERS:2,INTERACTION_DEFINITION_TYPE:"http://adlnet.gov/expapi/activities/cmi.interaction",MAX_SCALED_VALUE:1,MIN_SCALED_VALUE:0,NO_INDEX_FOUND:-1,NUMER_OF_SPECIFIED_IFI_PROPERTIES:1});r.xapiGeneral=a},{}],3:[function(e,i,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=r.interactionTypes=Object.freeze({CHOICE:"choice",FILL_IN:"fill-in",LIKERT:"likert",LONG_FILL_IN:"long-fill-in",MATCHING:"matching",NUMERIC:"numeric",OTHER:"other",PERFORMANCE:"performance",SEQUENCING:"sequencing",TRUE_FALSE:"true-false"});r.xapiValidationInteractionTypes=Object.freeze([a.CHOICE,a.FILL_IN,a.LIKERT,a.LONG_FILL_IN,a.MATCHING,a.NUMERIC,a.OTHER,a.PERFORMANCE,a.SEQUENCING,a.TRUE_FALSE])},{}],4:[function(e,i,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=Object.freeze({ACCOUNT:"account",ACTIVITY:"activity",ACTOR:"actor",AGENT:"agent",ATTACHMENT:"attachment",ATTACHMENTS:"attachments",AUTHORITY:"authority",CATEGORY:"category",CHOICE:"choice",CHOICES:"choices",COMPLETION:"completion",CONTENT_TYPE:"contentType",CONTEXT_ACTIVITIES:"contextActivities",CONTEXT:"context",CORRECT_RESPONSES_PATTERN:"correctResponsesPattern",DATE_TIME:"dateTime",DEFINITION:"definition",DESCRIPTION:"description",DISPLAY:"display",DURATION:"duration",EXTENSIONS:"extensions",FILE_URL:"fileUrl",GROUP:"group",GROUPING:"grouping",HOME_PAGE:"homePage",ID:"id",INSTRUCTOR:"instructor",INTERACTION_COMPONENTS:"interactionComponents",INTERACTION_TYPE:"interactionType",LANGUAGE_MAP:"languageMap",LANGUAGE:"language",LENGTH:"length",LIKERT:"likert",MATCHING:"matching",MAX:"max",MBOX_SHA_1_SUM:"mbox_sha1sum",MBOX:"mbox",MEMBER:"member",MIN:"min",MORE_INFO:"moreInfo",NAME:"name",OBJECT_TYPE:"objectType",OBJECT:"object",OPEN_ID:"openID",OTHER:"other",PARENT:"parent",PERFORMANCE:"performance",PLATFORM:"platform",RAW:"raw",REGISTRATION:"registration",RESPONSE:"response",RESULT:"result",REVISION:"revision",SCALE:"scale",SCALED:"scaled",SCORE:"score",SEQUENCING:"sequencing",SHA2:"sha2",SOURCE:"source",STATEMENT_REF:"statementRef",STATEMENT:"statement",STEPS:"steps",STORED:"stored",SUB_CONTEXT:"subContext",SUCCESS:"success",TARGET:"target",TEAM:"team",TIMESTAMP:"timestamp",TYPE:"type",USAGE_TYPE:"usageType",VERB:"verb",VERSION:"version"}),t=Object.freeze({GROUP:"Group",AGENT:"Agent",ACTIVITY:"Activity",STATEMENT_REF:"StatementRef",SUB_STATEMENT:"SubStatement"}),o=Object.freeze([a.ACCOUNT,a.MBOX_SHA_1_SUM,a.MBOX,a.OPEN_ID]),s=Object.freeze([t.GROUP,t.AGENT,t.ACTIVITY,t.STATEMENT_REF,t.SUB_STATEMENT]);r.properties=a,r.objectTypes=t,r.xapiValidationIfiPropertyNames=o,r.xApiValidObjectTypes=s},{}],5:[function(e,i,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=Object.freeze({UUID:/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,ISO_8601_DURATION:/^P((\d+([\.,]\d+)?Y)?(\d+([\.,]\d+)?M)?(\d+([\.,]\d+)?W)?(\d+([\.,]\d+)?D)?)?(T(\d+([\.,]\d+)?H)?(\d+([\.,]\d+)?M)?(\d+([\.,]\d+)?S)?)?$/,ISO_8601_DATE_TIME:/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/,MAILTO_URI:/^mailto:/,CONTAINS_WHITESPACE:/\s/g,SEMVER_1_P_0_P_0:/^((\d+)\.(\d+)\.(\d+))(?:-([\dA-Za-z\-]+))?$/,BASE_64:/^(?:[A-Za-z0-9\+\/]{4})*(?:[A-Za-z0-9\+\/]{2}==|[A-Za-z0-9\+\/]{3}=|[A-Za-z0-9\+\/]{4})$/,IRI:/^[a-z](?:[\-a-z0-9\+\.])*:(?:\/\/(?:(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:])*@)?(?:\[(?:(?:(?:[0-9a-f]{1,4}:){6}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|::(?:[0-9a-f]{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4}:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+[\-a-z0-9\._~!\$&'\(\)\*\+,;=:]+)\]|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}|(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=@])*)(?::[0-9]*)?(?:\/(?:(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*|\/(?:(?:(?:(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*)?|(?:(?:(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@]))*)*|(?!(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])))(?:\?(?:(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])|[\uE000-\uF8FF\uF0000-\uFFFFD|\u100000-\u10FFFD\/\?])*)?(?:\#(?:(?:%[0-9a-f][0-9a-f]|[\-a-z0-9\._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD\uD0000-\uDFFFD\uE1000-\uEFFFD!\$&'\(\)\*\+,;=:@])|[\/\?])*)?$/i,BCP_47:/^(?:(en-GB-oed|i-(?:ami|bnn|default|enochian|hak|klingon|lux|mingo|navajo|pwn|tao|tay|tsu)|sgn-(?:BE-FR|BE-NL|CH-DE))|(art-lojban|cel-gaulish|no-(?:bok|nyn)|zh-(?:guoyu|hakka|min|min-nan|xiang)))$|^(x(?:-[0-9a-z]{1,8})+)$|^(?:((?:[a-z]{2,3}(?:(?:-[a-z]{3}){1,3})?)|[a-z]{4}|[a-z]{5,8})(?:-([a-z]{4}))?(?:-([a-z]{2}|[0-9]{3}))?((?:-(?:[a-z0-9]{5,8}|[0-9][a-z0-9]{3}))*)?((?:-[0-9a-wy-z](?:-[a-z0-9]{2,8}){1,})*)?(-x(?:-[0-9a-z]{1,8})+)?)$/i}),t=Object.freeze({YEAR:1,MONTH:2,DAY:3,HOUR:4,MINUTE:5,SECOND:6,MSECOND:7,ZONE:8,RELATIVE_TIME:9,TIME_ZONE_HOUR:10,TIME_ZONE_MINUTE:11});r.xapiValidationRegex=a,r.dateFormatRegexPositions=t},{}],6:[function(e,i,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.xapiWhiteListProperties=void 0;var a=e("../constants/properties"),t=Object.freeze({IFI:[a.properties.HOME_PAGE,a.properties.NAME],URI:[a.properties.ID,a.properties.DISPLAY],COMPONENT_ARRAY:[a.properties.ID,a.properties.DESCRIPTION],ACTIVITY_DEFINITION:[a.properties.NAME,a.properties.DESCRIPTION,a.properties.TYPE,a.properties.MORE_INFO,a.properties.EXTENSIONS,a.properties.INTERACTION_TYPE,a.properties.CORRECT_RESPONSES_PATTERN,a.properties.CHOICES,a.properties.SCALE,a.properties.SOURCE,a.properties.TARGET,a.properties.STEPS],ACTIVITY:[a.properties.OBJECT_TYPE,a.properties.ID,a.properties.DEFINITION],STATEMENT_REF:[a.properties.ID,a.properties.OBJECT_TYPE],SCORE:[a.properties.SCALED,a.properties.RAW,a.properties.MIN,a.properties.MAX],RESULT:[a.properties.SCORE,a.properties.SUCCESS,a.properties.COMPLETION,a.properties.RESPONSE,a.properties.DURATION,a.properties.EXTENSIONS],ATTACHMENT:[a.properties.USAGE_TYPE,a.properties.DISPLAY,a.properties.DESCRIPTION,a.properties.CONTENT_TYPE,a.properties.LENGTH,a.properties.SHA2,a.properties.FILE_URL],AGENT:[a.properties.OBJECT_TYPE,a.properties.NAME,a.properties.ACCOUNT,a.properties.MBOX_SHA_1_SUM,a.properties.MBOX,a.properties.OPEN_ID],GROUP:[a.properties.OBJECT_TYPE,a.properties.NAME,a.properties.MEMBER,a.properties.ACCOUNT,a.properties.MBOX_SHA_1_SUM,a.properties.MBOX,a.properties.OPEN_ID],CONTEXT_ACTIVITIES:[a.properties.PARENT,a.properties.GROUPING,a.properties.CATEGORY,a.properties.OTHER],STATEMENT:[a.properties.ID,a.properties.ACTOR,a.properties.VERB,a.properties.OBJECT,a.properties.RESULT,a.properties.CONTEXT,a.properties.TIMESTAMP,a.properties.STORED,a.properties.AUTHORITY,a.properties.VERSION,a.properties.ATTACHMENTS],SUB_STATEMENT:[a.properties.ACTOR,a.properties.VERB,a.properties.OBJECT,a.properties.RESULT,a.properties.CONTEXT,a.properties.TIMESTAMP,a.properties.ATTACHMENTS,a.properties.OBJECT_TYPE],EXTENSIONS:[a.properties.REGISTRATION,a.properties.INSTRUCTOR,a.properties.TEAM,a.properties.CONTEXT_ACTIVITIES,a.properties.REVISION,a.properties.PLATFORM,a.properties.LANGUAGE,a.properties.STATEMENT,a.properties.EXTENSIONS]});r.xapiWhiteListProperties=t},{"../constants/properties":4}],7:[function(e,i,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.xapiValidationUtils=void 0;var a,t=e("../constants/regex"),o=e("../constants/properties"),s="[object String]",T="[object Array]",p="[object Boolean]",n="[object Number]",E=Object.prototype.toString;r.xapiValidationUtils=a={isString:function(e){return E.call(e)===s},isObject:function(e){return e===Object(e)},isArray:Array.isArray||function(e){return E.call(e)===T},isBoolean:function(e){return e===!0||e===!1||E.call(e)===p},isNumber:function(e){return E.call(e)===n},isDefined:function(e){return null!==e||void 0!==e},isNonNullMapObject:function(e){return this.isDefined(e)&&this.isObject(e)&&!this.isArray(e)},isValidLanguageTag:function(e){return this.isDefined(e)&&this.isString(e)&&t.xapiValidationRegex.BCP_47.test(e)},addPropToTrace:function(e,i){return this.isDefined(i)?e+"."+i:e},addLookupToTrace:function(e,i){return this.isDefined(i)?this.isNumber(i)?e+"["+i+"]":e+'["'+i+'"]':e},localTraceToString:function(e,i){return this.addPropToTrace(e,i)},isGroup:function(e){return null!==e.member&&void 0!==e.member||e.objectType===o.objectTypes.GROUP}},r.xapiValidationUtils=a},{"../constants/properties":4,"../constants/regex":5}],8:[function(e,i,r){"use strict";function a(e,i){var r;return e=e||null,i=i||null,r=J.xapiGeneral.FIRST_REPORT_VERSTION,{instance:e,errors:i,version:r}}function t(e,i){return a(e,null===i||void 0===i?[]:[i])}function o(e,i,r,a){var t,o,s;t=a||[],o=r||"";for(s in e)e.hasOwnProperty(s)&&i.indexOf(s)===J.xapiGeneral.NO_INDEX_FOUND&&t.push({trace:w.xapiValidationUtils.addPropToTrace(o,s),message:j.xapiValidationErrors.UNEXPECTED,level:j.xapiErrorLevels.MUST_VIOLATION});return t}function s(e,i,r,a,t,o){var s,T,p,n;return s=a||[],T=r||"",p=e[i],n=o||j.xapiErrorLevels.MUST_VIOLATION,void 0!==p?null!==p&&w.xapiValidationUtils.isString(p)||s.push({trace:w.xapiValidationUtils.localTraceToString(T,i),message:i+" "+j.xapiValidationErrors.MUST_BE_STRING,level:n}):t&&s.push({trace:w.xapiValidationUtils.localTraceToString(T,i),message:i+" "+j.xapiValidationErrors.MUST_BE_PRESENT,level:n}),s}function T(e,i,r,a,t){var o,s,T;return o=a||[],s=r||"",T=e[i],void 0!==T?null!==T&&w.xapiValidationUtils.isString(T)?Y.xapiValidationRegex.IRI.test(T)||o.push({trace:w.xapiValidationUtils.localTraceToString(s,i),message:i+" "+j.xapiValidationErrors.MUST_BE_IRI_STRING,level:j.xapiErrorLevels.SHOULD_VIOLATION}):o.push({trace:w.xapiValidationUtils.localTraceToString(s,i),message:i+" "+j.xapiValidationErrors.MUST_BE_URI_STRING,level:j.xapiErrorLevels.MUST_VIOLATION}):t&&o.push({trace:w.xapiValidationUtils.localTraceToString(s,i),message:i+" "+j.xapiValidationErrors.MUST_BE_URI_PRESENT,level:j.xapiErrorLevels.MUST_VIOLATION}),o}function p(e,i,r,a,t){return s(e,i,r,a,t)}function n(e,i,r,a,t){var o,s,T;return o=a||[],s=r||"",T=e[i],void 0!==T?null!==T&&w.xapiValidationUtils.isBoolean(T)||o.push({trace:w.xapiValidationUtils.localTraceToString(s,i),message:i+" "+j.xapiValidationErrors.MUST_BE_BOOLEAN,level:j.xapiErrorLevels.MUST_VIOLATION}):t&&o.push({trace:w.xapiValidationUtils.localTraceToString(s,i),message:i+" "+j.xapiValidationErrors.MUST_BE_BOOLEAN_PRESENT,level:j.xapiErrorLevels.MUST_VIOLATION}),o}function E(e,i,r,a,t){var o,s,T;return o=a||[],s=r||"",T=e[i],void 0!==T?null!==T&&w.xapiValidationUtils.isNumber(T)||o.push({trace:w.xapiValidationUtils.localTraceToString(s,i),message:i+" "+j.xapiValidationErrors.MUST_BE_NUMBER,level:j.xapiErrorLevels.MUST_VIOLATION}):t&&o.push({trace:w.xapiValidationUtils.localTraceToString(s,i),message:i+" "+j.xapiValidationErrors.MUST_BE_NUMBER_PRESENT,level:j.xapiErrorLevels.MUST_VIOLATION}),o}function l(e,i,r){var a,t,p;return a=r||[],t=i||"",void 0!==e.mbox&&null!==e.mbox&&(w.xapiValidationUtils.isString(e.mbox)?Y.xapiValidationRegex.MAILTO_URI.test(e.mbox)||a.push({trace:w.xapiValidationUtils.localTraceToString(t,y.properties.MBOX),message:j.xapiValidationErrors.IFI_MUST_BE_VALID_MBOX_FORMAT,level:j.xapiErrorLevels.MUST_VIOLATION}):a.push({trace:w.xapiValidationUtils.localTraceToString(t,y.properties.MBOX),message:j.xapiValidationErrors.IFI_MUST_BE_MBOX_URI,level:j.xapiErrorLevels.MUST_VIOLATION})),s(e,y.properties.MBOX_SHA_1_SUM,t,a,!1),T(e,y.properties.OPEN_ID,t,a,!1),void 0!==e.account&&null!==e.account&&(p=w.xapiValidationUtils.addPropToTrace(t,y.properties.ACCOUNT),T(e.account,y.properties.HOME_PAGE,p,a,!0),s(e.account,y.properties.NAME,p,a,!0),o(e.account,H.xapiWhiteListProperties.IFI,p,a)),a}function _(e){var i;return null===e||void 0===e?[]:i=y.xapiValidationIfiPropertyNames.filter(function(i){if(void 0!==e[i]&&null!==e[i])return{key:i,value:e[i]}})}function u(e){return _(e).length}function I(e,i,r){var a,t;return a=r||[],t=i||y.properties.EXTENSIONS,void 0===e?a:(w.xapiValidationUtils.isNonNullMapObject(e)||a.push({trace:t,message:j.xapiValidationErrors.EXTENSIONS_MUST_NOT_BE_NULL,level:j.xapiErrorLevels.MUST_VIOLATION}),a)}function O(e,i,r){var a,t,o,s;if(a=r||[],t=i||y.properties.LANGUAGE_MAP,void 0===e)return a;if(!w.xapiValidationUtils.isNonNullMapObject(e))return a.push({trace:w.xapiValidationUtils.addPropToTrace(t),message:j.xapiValidationErrors.LANGUAGE_MAPS_MUST_NOT_BE_NULL,level:j.xapiErrorLevels.MUST_VIOLATION}),a;for(o in e)e.hasOwnProperty(o)&&(w.xapiValidationUtils.isValidLanguageTag(o)||a.push({trace:w.xapiValidationUtils.addPropToTrace(t,o),message:o+" "+j.xapiValidationErrors.LANGUAGE_MAP_KEY_INVALID,level:j.xapiErrorLevels.MUST_VIOLATION}),s=e[o],null!==s&&void 0!==s&&w.xapiValidationUtils.isString(s)||a.push({trace:w.xapiValidationUtils.addLookupToTrace(t,o),message:o+" "+j.xapiValidationErrors.LANGUAGE_MAP_KEY_MUST_BE_STRING,level:j.xapiErrorLevels.MUST_VIOLATION}));return a}function N(e,i,r){var a,t;return a=r||[],t=i||y.properties.VERB,void 0===e?(a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.VERB_MUST_BE_PROVIDED,level:j.xapiErrorLevels.MUST_VIOLATION}),a):w.xapiValidationUtils.isNonNullMapObject(e)?(T(e,y.properties.ID,t,a,!0),void 0===e.display?a.push({trace:w.xapiValidationUtils.addPropToTrace(t,y.properties.DISPLAY),message:j.xapiValidationErrors.DISPLAY_SHOULD_BE_PROVIDED,level:j.xapiErrorLevels.SHOULD_VIOLATION}):O(e.display,w.xapiValidationUtils.addPropToTrace(t,y.properties.DISPLAY),a),o(e,H.xapiWhiteListProperties.URI,t,a),a):(a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.VERB_MUST_NOT_BE_NULL,level:j.xapiErrorLevels.MUST_VIOLATION}),a)}function S(e,i,r,a,t){var T,p,n,E,l;return T=t||[],p=a||y.properties.INTERACTION_COMPONENTS,n=r.indexOf(i)!==J.xapiGeneral.NO_INDEX_FOUND,E=[],n&&void 0!==e?null!==e&&w.xapiValidationUtils.isArray(e)?e.forEach(function(e,i){l=w.xapiValidationUtils.addLookupToTrace(p,i),w.xapiValidationUtils.isNonNullMapObject(e)?(s(e,y.properties.ID,l,T,!0,j.xapiErrorLevels.MUST_VIOLATION),E.indexOf(e.id)!==J.xapiGeneral.NO_INDEX_FOUND?T.push({trace:w.xapiValidationUtils.addPropToTrace(l,y.properties.ID),message:j.xapiValidationErrors.ID_MUST_BE_UNIQUE,level:j.xapiErrorLevels.MUST_VIOLATION}):E.push(e.id),e.id&&Y.xapiValidationRegex.CONTAINS_WHITESPACE.test(e.id)&&T.push({trace:w.xapiValidationUtils.addPropToTrace(l,y.properties.ID),message:j.xapiValidationErrors.ID_SHOULD_NOT_CONTAIN_WHITESPACES,level:j.xapiErrorLevels.SHOULD_VIOLATION}),O(e.description,w.xapiValidationUtils.addPropToTrace(l,y.properties.DESCRIPTION),T),o(e,H.xapiWhiteListProperties.COMPONENT_ARRAY,l,T)):T.push({trace:l,message:j.xapiValidationErrors.INTERACTION_COMPONENT_MUST_NOT_BE_NULL,level:j.xapiErrorLevels.MUST_VIOLATION})}):T.push({trace:p,message:j.xapiValidationErrors.INTERACTION_COMPONENT_SHOULD_BE_ARRAY,level:j.xapiErrorLevels.SHOULD_VIOLATION}):i&&e&&T.push({trace:p,message:j.xapiValidationErrors.INTERACTION_TYPE_MUST_BE_VALID+" "+i,level:j.xapiErrorLevels.SHOULD_VIOLATION}),T}function d(e,i,r){var a,t,s;return a=r||[],t=i||y.properties.DEFINITION,s=w.xapiValidationUtils.addPropToTrace(t,y.properties.CORRECT_RESPONSES_PATTERN),w.xapiValidationUtils.isNonNullMapObject(e)?(O(e.name,w.xapiValidationUtils.addPropToTrace(t,y.properties.NAME),a),O(e.description,w.xapiValidationUtils.addPropToTrace(t,y.properties.DESCRIPTION),a),T(e,y.properties.TYPE,t,a,!1),p(e,y.properties.MORE_INFO,t,a,!1),I(e.extensions,w.xapiValidationUtils.addPropToTrace(t,y.properties.EXTENSIONS),a),void 0!==e.interactionType&&(e.type!==J.xapiGeneral.INTERACTION_DEFINITION_TYPE&&a.push({trace:w.xapiValidationUtils.localTraceToString(t,y.properties.TYPE),message:j.xapiValidationErrors.INTERACTION_ACTIVITY_SHOULD_HAVE+' "'+J.xapiGeneral.INTERACTION_DEFINITION_TYPE+'"',level:j.xapiErrorLevels.SHOULD_VIOLATION}),X.xapiValidationInteractionTypes.indexOf(e.interactionType)===J.xapiGeneral.NO_INDEX_FOUND&&a.push({trace:w.xapiValidationUtils.localTraceToString(t,y.properties.INTERACTION_TYPE),message:j.xapiValidationErrors.INTERACTION_TYPE_MUST_BE_CMI,level:j.xapiErrorLevels.MUST_VIOLATION})),void 0!==e.correctResponsesPattern&&(w.xapiValidationUtils.isArray(e.correctResponsesPattern)?e.correctResponsesPattern.forEach(function(e,i){null!==e&&void 0!==e&&w.xapiValidationUtils.isString(e)||a.push({trace:w.xapiValidationUtils.addLookupToTrace(s,i),message:j.xapiValidationErrors.CORRECT_RESPONSES_PATTERN_MUST_BE_STRINGS,level:j.xapiErrorLevels.MUST_VIOLATION})}):a.push({trace:s,message:j.xapiValidationErrors.CORRECT_RESPONSES_PATTERN_MUST_BE_ARRAY,level:j.xapiErrorLevels.MUST_VIOLATION})),S(e.choices,e.interactionType,[y.properties.CHOICE,y.properties.SEQUENCING],w.xapiValidationUtils.addPropToTrace(t,y.properties.CHOICES),a),S(e.scale,e.interactionType,[y.properties.LIKERT],w.xapiValidationUtils.addPropToTrace(t,y.properties.SCALE),a),S(e.source,e.interactionType,[y.properties.MATCHING],w.xapiValidationUtils.addPropToTrace(t,y.properties.SOURCE),a),S(e.target,e.interactionType,[y.properties.MATCHING],w.xapiValidationUtils.addPropToTrace(t,y.properties.TARGET),a),S(e.steps,e.interactionType,[y.properties.PERFORMANCE],w.xapiValidationUtils.addPropToTrace(t,y.properties.STEPS),a),o(e,H.xapiWhiteListProperties.ACTIVITY_DEFINITION,t,a),a):(a.push({trace:w.xapiValidationUtils.addPropToTrace(t),message:j.xapiValidationErrors.DEFINITIONS_MUST_BE_OBJECTS,level:j.xapiErrorLevels.MUST_VIOLATION}),a)}function c(e,i,r){var a,t;return a=r||[],t=i||y.properties.ACTIVITY,w.xapiValidationUtils.isNonNullMapObject(e)?(T(e,y.properties.ID,t,a,!0),void 0!==e.definition&&d(e.definition,w.xapiValidationUtils.addPropToTrace(t,y.properties.DEFINITION),a),o(e,H.xapiWhiteListProperties.ACTIVITY,t,a),a):(a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.ACTIVITIES_MUST_NOT_BE_NULL,level:j.xapiErrorLevels.MUST_VIOLATION}),a)}function A(e,i,r){var a,t;return a=r||[],t=i||y.properties.STATEMENT_REF,w.xapiValidationUtils.isNonNullMapObject(e)?(e.objectType!==y.objectTypes.STATEMENT_REF&&a.push({trace:w.xapiValidationUtils.addPropToTrace(t,y.properties.OBJECT_TYPE),message:j.xapiValidationErrors.OBJECT_TYPE_MUST_BE_STATEMENT_REF,level:j.xapiErrorLevels.MUST_VIOLATION}),e.id&&Y.xapiValidationRegex.UUID.test(e.id)||a.push({trace:w.xapiValidationUtils.addPropToTrace(t,y.properties.ID),message:j.xapiValidationErrors.ID_MUST_BE_VALID_UUID_REF,level:j.xapiErrorLevels.MUST_VIOLATION}),o(e,H.xapiWhiteListProperties.STATEMENT_REF,t,a),a):(a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.STATEMENT_REF_MUST_NOT_BE_NULL_MAP_OBJECTS,level:j.xapiErrorLevels.MUST_VIOLATION}),a)}function F(e,i,r){var a,t;return a=r||[],t=i||y.properties.SCORE,void 0===e?a:(E(e,y.properties.SCALED,t,a,!1),void 0!==e.scaled&&(e.scaled<J.xapiGeneral.MIN_SCALED_VALUE||e.scaled>J.xapiGeneral.MAX_SCALED_VALUE)&&a.push({trace:w.xapiValidationUtils.addPropToTrace(t,y.properties.SCALED),message:j.xapiValidationErrors.SCALED_MUST_BE_BETWEEN_0_1,level:j.xapiErrorLevels.MUST_VIOLATION}),void 0!==e.min&&(E(e,y.properties.MIN,t,a,!1),void 0!==e.raw&&e.raw<e.min&&a.push({trace:w.xapiValidationUtils.addPropToTrace(t,y.properties.RAW),message:j.xapiValidationErrors.RAW_MUST_BE_GREATER_THAN_MIN,level:j.xapiErrorLevels.MUST_VIOLATION}),void 0!==e.max&&e.max<e.min&&a.push({trace:w.xapiValidationUtils.addPropToTrace(t,y.properties.MAX),message:j.xapiValidationErrors.MAX_MUST_BE_GREATER_THAN_MIN,level:j.xapiErrorLevels.MUST_VIOLATION})),void 0!==e.max&&(E(e,y.properties.MAX,t,a,!1),void 0!==e.raw&&e.raw>e.max&&a.push({trace:w.xapiValidationUtils.addPropToTrace(t,y.properties.RAW),message:j.xapiValidationErrors.RAW_MUST_BE_LESS_THAN_MAX,level:j.xapiErrorLevels.MUST_VIOLATION})),E(e,y.properties.RAW,t,a,!1),
o(e,H.xapiWhiteListProperties.SCORE,t,a),a)}function U(e,i,r){var a,t;return a=r||[],t=i||y.properties.RESULT,void 0===e?a:w.xapiValidationUtils.isNonNullMapObject(e)?(F(e.score,w.xapiValidationUtils.addPropToTrace(t,y.properties.SCORE),a),n(e,y.properties.SUCCESS,t,a,!1),n(e,y.properties.COMPLETION,t,a,!1),s(e,y.properties.RESPONSE,t,a,!1),I(e.extensions,w.xapiValidationUtils.addPropToTrace(t,y.properties.EXTENSIONS),a),void 0===e.duration||null!==e.duration&&w.xapiValidationUtils.isString(e.duration)&&Y.xapiValidationRegex.ISO_8601_DURATION.test(e.duration)||a.push({trace:w.xapiValidationUtils.addPropToTrace(t,y.properties.DURATION),message:j.xapiValidationErrors.DURATION_MUST_BE_VALID,level:j.xapiErrorLevels.MUST_VIOLATION}),o(e,H.xapiWhiteListProperties.RESULT,t,a),a):(a.push({trace:w.xapiValidationUtils.addPropToTrace(t),message:j.xapiValidationErrors.RESULT_MUST_BE_MAP_OBJECT,level:j.xapiErrorLevels.MUST_VIOLATION}),a)}function M(e,i,r,a){var t,o,s,T;return t=a||[],o=r||y.properties.DATE_TIME,T=e[i],void 0===T?t:null!==T&&w.xapiValidationUtils.isString(T)?(s=Y.xapiValidationRegex.ISO_8601_DATE_TIME.exec(T),s?G(s)||t.push({trace:w.xapiValidationUtils.localTraceToString(o,i),message:j.xapiValidationErrors.DATE_SHOULD_INCLUDE_ZONE_INFORMATION,level:j.xapiErrorLevels.SHOULD_VIOLATION}):t.push({trace:w.xapiValidationUtils.localTraceToString(o,i),message:j.xapiValidationErrors.DATE_MUST_BE_VALID,level:j.xapiErrorLevels.MUST_VIOLATION}),t):(t.push({trace:w.xapiValidationUtils.localTraceToString(o,i),message:i+" "+j.xapiValidationErrors.MUST_BE_STRING,level:j.xapiErrorLevels.MUST_VIOLATION}),t)}function V(e,i,r){var a,t;return a=r||[],t=i||y.properties.VERSION,void 0===e?a:(null!==e&&w.xapiValidationUtils.isString(e)&&Y.xapiValidationRegex.SEMVER_1_P_0_P_0.test(e)||a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.VERSION_MUST_COMPLY_SEMANTIC_VERSIONING,level:j.xapiErrorLevels.MUST_VIOLATION}),a)}function x(e,i,r){var a,t;return a=r||[],t=i||y.properties.ATTACHMENT,w.xapiValidationUtils.isNonNullMapObject(e)?(void 0===e.display?a.push({trace:w.xapiValidationUtils.localTraceToString(t,y.properties.DISPLAY),message:j.xapiValidationErrors.DISPLAY_SHOULD_BE_PROVIDED,level:j.xapiErrorLevels.MUST_VIOLATION}):O(e.display,w.xapiValidationUtils.addPropToTrace(t,y.properties.DISPLAY),a),O(e.description,w.xapiValidationUtils.addPropToTrace(t,y.properties.DESCRIPTION),a),T(e,y.properties.USAGE_TYPE,t,a,!0,j.xapiErrorLevels.MUST_VIOLATION),T(e,y.properties.FILE_URL,t,a,!1,j.xapiErrorLevels.MUST_VIOLATION),s(e,y.properties.CONTENT_TYPE,t,a,!0,j.xapiErrorLevels.MUST_VIOLATION),void 0!==e.length&&null!==e.length&&w.xapiValidationUtils.isNumber(e.length)&&e.length%1===0||a.push({trace:w.xapiValidationUtils.localTraceToString(t,y.properties.LENGTH),message:j.xapiValidationErrors.LENGTH_MUST_BE_INTEGER,level:j.xapiErrorLevels.MUST_VIOLATION}),void 0===e.sha2?a.push({trace:w.xapiValidationUtils.localTraceToString(t,y.properties.SHA2),message:j.xapiValidationErrors.SHA2_MUST_BE_PROVIDED_ON_ATTACHMENT_OBJECTS,level:j.xapiErrorLevels.MUST_VIOLATION}):null!==e.sha2&&w.xapiValidationUtils.isString(e.sha2)&&Y.xapiValidationRegex.BASE_64.test(e.sha2)||a.push({trace:w.xapiValidationUtils.localTraceToString(t,y.properties.SHA2),message:j.xapiValidationErrors.SHA2_MUST_CONTAIN_BASE_64_STRING,level:j.xapiErrorLevels.MUST_VIOLATION}),o(e,H.xapiWhiteListProperties.ATTACHMENT,t,a),a):(a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.ATTACHMENTS_MUST_NOT_BE_NULL_MAP_OBJECTS,level:j.xapiErrorLevels.MUST_VIOLATION}),a)}function R(e,i,r){var a,t;return a=r||[],t=i||y.properties.ATTACHMENTS,void 0===e?a:null!==e&&w.xapiValidationUtils.isArray(e)?(e.forEach(function(e,i){x(e,w.xapiValidationUtils.addLookupToTrace(t,i),a)}),a):(a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.ATTACHMENTS_MUST_BE_NOT_NULL_ARRAY,level:j.xapiErrorLevels.MUST_VIOLATION}),a)}function L(e,i,r){var a,t,T;return a=r||[],t=i||y.properties.AGENT,w.xapiValidationUtils.isNonNullMapObject(e)?(T=u(e),T!==J.xapiGeneral.NUMER_OF_SPECIFIED_IFI_PROPERTIES&&a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.AGENT_IFI_PROPERTIES_MUST_BE_SPECIFIED,level:j.xapiErrorLevels.MUST_VIOLATION}),e.objectType===y.objectTypes.GROUP&&a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.AGENT_MUST_NOT_HAVE_GROUP_CHARACTERISTICS,level:j.xapiErrorLevels.MUST_VIOLATION}),l(e,t,a),s(e,y.properties.NAME,t,a,!1),o(e,H.xapiWhiteListProperties.AGENT,t,a),a):(a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.AGENT_MUST_BE_NON_NULL_MAP_OBJECT,level:j.xapiErrorLevels.MUST_VIOLATION}),a)}function D(e,i,r){var a,t,T,p;return a=r||[],t=i||y.properties.GROUP,T=w.xapiValidationUtils.addPropToTrace(t,y.properties.MEMBER),w.xapiValidationUtils.isNonNullMapObject(e)?(p=u(e),0===p?null!==e.member&&void 0!==e.member||a.push({trace:T,message:j.xapiValidationErrors.MEMBER_MUST_BE_PROVIDED_FOR_ANONYMOUS_GROUPS,level:j.xapiErrorLevels.MUST_VIOLATION}):p>J.xapiGeneral.NUMER_OF_SPECIFIED_IFI_PROPERTIES&&a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.GROUP_IFI_PROPERTIES_MUST_BE_SPECIFIED,level:j.xapiErrorLevels.MUST_VIOLATION}),l(e,t,a),s(e,y.properties.NAME,t,a,!1),void 0!==e.member&&(null!==e.member&&w.xapiValidationUtils.isArray(e.member)?e.member.forEach(function(e,i){L(e,w.xapiValidationUtils.addLookupToTrace(T,i),a)}):a.push({trace:w.xapiValidationUtils.localTraceToString(t,y.properties.MEMBER),message:j.xapiValidationErrors.GROUP_MEMBER_MUST_BE_ARRAY,level:j.xapiErrorLevels.MUST_VIOLATION})),o(e,H.xapiWhiteListProperties.GROUP,t,a),a):(a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.GROUP_MUST_BE_NON_NULL_MAP_OBJECT,level:j.xapiErrorLevels.MUST_VIOLATION}),a)}function v(e,i,r){var a,t;return a=r||[],t=i||y.properties.ACTOR,null===e||void 0===e?(a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.ACTOR_MUST_BE_PROVIDED,level:j.xapiErrorLevels.MUST_VIOLATION}),a):(w.xapiValidationUtils.isGroup(e)?D(e,t,a):L(e,t,a),a)}function C(e,i,r){var a,t;return a=r||[],t=i||y.properties.AUTHORITY,void 0===e?a:w.xapiValidationUtils.isNonNullMapObject(e)?(w.xapiValidationUtils.isGroup(e)?(D(e,t,a),e.member&&e.member.length&&e.member.length===J.xapiGeneral.GROUP_AUTHORITY_AGENT_MEMBERS||a.push({trace:w.xapiValidationUtils.localTraceToString(t,y.properties.MEMBER),message:j.xapiValidationErrors.GROUP_AUTHORITY_AGENT_MEMBERS_MUST_BE_TWO,level:j.xapiErrorLevels.MUST_VIOLATION})):L(e,t,a),a):(a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.AUTHORITY_MUST_BE_NON_NULL_MAP_OBJECT,level:j.xapiErrorLevels.MUST_VIOLATION}),a)}function P(e,i,r){var a,t;return a=r||[],t=i||y.properties.SUB_CONTEXT,void 0===e?a:(null===e?a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.CONTEXT_ACTIVITIES_MUST_NOT_BE_NULL,level:j.xapiErrorLevels.MUST_VIOLATION}):w.xapiValidationUtils.isArray(e)?e.forEach(function(e,i){c(e,w.xapiValidationUtils.addLookupToTrace(t,i),a)}):w.xapiValidationUtils.isObject(e)?(a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.CONTEXT_ACTIVITIES_SHOULD_BE_AN_ARRAY,level:j.xapiErrorLevels.SHOULD_VIOLATION}),c(e,t,a)):a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.CONTEXT_ACTIVITIES_MUST_BE_ARRAY_OR_ACTIVITY_OBJ,level:j.xapiErrorLevels.MUST_VIOLATION}),a)}function m(e,i,r){var a,t;return a=r||[],t=i||y.properties.CONTEXT_ACTIVITIES,void 0===e?a:w.xapiValidationUtils.isNonNullMapObject(e)?(P(e.parent,w.xapiValidationUtils.addPropToTrace(t,y.properties.PARENT),a),P(e.grouping,w.xapiValidationUtils.addPropToTrace(t,y.properties.GROUPING),a),P(e.category,w.xapiValidationUtils.addPropToTrace(t,y.properties.CATEGORY),a),P(e.other,w.xapiValidationUtils.addPropToTrace(t,y.properties.OTHER),a),o(e,H.xapiWhiteListProperties.CONTEXT_ACTIVITIES,t,a),a):(a.push({trace:w.xapiValidationUtils.localTraceToString(t),message:j.xapiValidationErrors.CONTEXT_ACTIVITIES_MUST_BE_NON_NULL_MAP_OBJECT,level:j.xapiErrorLevels.MUST_VIOLATION}),a)}function g(e,i,r,a){var t,T;return t=r||[],T=i||y.properties.CONTEXT,void 0===e?t:w.xapiValidationUtils.isNonNullMapObject(e)?(void 0===e.registration||null!==e.registration&&w.xapiValidationUtils.isString(e.registration)&&Y.xapiValidationRegex.UUID.test(e.registration)||t.push({trace:w.xapiValidationUtils.localTraceToString(T,y.properties.REGISTRATION),message:j.xapiValidationErrors.REGISTRATION_MUST_BE_UUID_STRING,level:j.xapiErrorLevels.MUST_VIOLATION}),[y.objectTypes.GROUP,y.objectTypes.AGENT].indexOf(a)!==J.xapiGeneral.NO_INDEX_FOUND&&(void 0!==e.revision&&t.push({trace:w.xapiValidationUtils.localTraceToString(T,y.properties.REVISION),message:j.xapiValidationErrors.REVISION_MUST_BE_AGENT_OR_GROUP,level:j.xapiErrorLevels.MUST_VIOLATION}),void 0!==e.platform&&t.push({trace:w.xapiValidationUtils.localTraceToString(T,y.properties.PLATFORM),message:j.xapiValidationErrors.PLATFORM_MUST_NOT_BE_USED_WITH_REVISION_AGENT_OR_GROUP,level:j.xapiErrorLevels.MUST_VIOLATION})),s(e,y.properties.REVISION,T,t,!1,j.xapiErrorLevels.MUST_VIOLATION),s(e,y.properties.PLATFORM,T,t,!1,j.xapiErrorLevels.MUST_VIOLATION),void 0!==e.team&&D(e.team,w.xapiValidationUtils.addPropToTrace(T,y.properties.TEAM),t),void 0!==e.contextActivities&&m(e.contextActivities,w.xapiValidationUtils.addPropToTrace(T,y.properties.CONTEXT_ACTIVITIES),t),void 0===e.language||w.xapiValidationUtils.isValidLanguageTag(e.language)||t.push({trace:w.xapiValidationUtils.localTraceToString(T,y.properties.LANGUAGE),message:j.xapiValidationErrors.LANGUAGE_MUST_BE_STRING,level:j.xapiErrorLevels.MUST_VIOLATION}),void 0!==e.statement&&A(e.statement,w.xapiValidationUtils.addPropToTrace(T,y.properties.STATEMENT),t),void 0!==e.instructor&&(w.xapiValidationUtils.isGroup(e.instructor)?D(e.instructor,w.xapiValidationUtils.addPropToTrace(T,y.properties.INSTRUCTOR),t):L(e.instructor,w.xapiValidationUtils.addPropToTrace(T,y.properties.INSTRUCTOR),t)),I(e.extensions,w.xapiValidationUtils.addPropToTrace(T,y.properties.EXTENSIONS),t),o(e,H.xapiWhiteListProperties.EXTENSIONS,T,t),t):(t.push({trace:T,message:j.xapiValidationErrors.CONTEXT_MUST_BE_NON_NUL_MAP_OBJECT,level:j.xapiErrorLevels.MUST_VIOLATION}),t)}function B(e,i,r,a){var t,o,T;if(t=r||[],o=i||y.properties.OBJECT,void 0===e)return t.push({trace:w.xapiValidationUtils.localTraceToString(o),message:j.xapiValidationErrors.OBJECT_MUST_BE_DEFINED,level:j.xapiErrorLevels.MUST_VIOLATION}),t;if(!w.xapiValidationUtils.isNonNullMapObject(e))return t.push({trace:w.xapiValidationUtils.localTraceToString(o),message:j.xapiValidationErrors.OBJECT_MUST_BE_NON_NULL_MAP_OBJECT,level:j.xapiErrorLevels.MUST_VIOLATION}),t;switch(s(e,y.properties.OBJECT_TYPE,o,t,!0,j.xapiErrorLevels.SHOULD_VIOLATION),T=e.objectType||y.objectTypes.ACTIVITY){case y.objectTypes.ACTIVITY:c(e,o,t);break;case y.objectTypes.AGENT:L(e,o,t);break;case y.objectTypes.GROUP:D(e,o,t);break;case y.objectTypes.STATEMENT_REF:A(e,o,t);break;case y.objectTypes.SUB_STATEMENT:a&&t.push({trace:w.xapiValidationUtils.localTraceToString(o,y.properties.OBJECT_TYPE),message:j.xapiValidationErrors.SUB_STATEMENT_MUST_NOT_CONTAIN_SUB_STATEMENT,level:j.xapiErrorLevels.MUST_VIOLATION}),f(e,o,t,!0);break;default:t.push({trace:w.xapiValidationUtils.localTraceToString(o,y.properties.OBJECT_TYPE),message:j.xapiValidationErrors.OBJECT_TYPE_MUST_BE_VALID_OPTION+" "+y.xApiValidObjectTypes.toString(),level:j.xapiErrorLevels.MUST_VIOLATION})}return t}function f(e,i,r,a){var t,s,T,p;return t=r||[],s=i||y.properties.STATEMENT,p=H.xapiWhiteListProperties.STATEMENT,w.xapiValidationUtils.isNonNullMapObject(e)?(a?p=H.xapiWhiteListProperties.SUB_STATEMENT:null!==e.id&&void 0!==e.id&&w.xapiValidationUtils.isString(e.id)?Y.xapiValidationRegex.UUID.test(e.id)||t.push({trace:w.xapiValidationUtils.localTraceToString(s,y.properties.ID),message:j.xapiValidationErrors.ID_MUST_BE_VALID,level:j.xapiErrorLevels.MUST_VIOLATION}):t.push({trace:w.xapiValidationUtils.localTraceToString(s,y.properties.ID),message:j.xapiValidationErrors.IDS_SHOULD_BE_GENERATED_BY_LRS,level:j.xapiErrorLevels.SHOULD_VIOLATION}),v(e.actor,w.xapiValidationUtils.addPropToTrace(s,y.properties.ACTOR),t),N(e.verb,w.xapiValidationUtils.addPropToTrace(s,y.properties.VERB),t),B(e.object,w.xapiValidationUtils.addPropToTrace(s,y.properties.OBJECT),t,a),U(e.result,w.xapiValidationUtils.addPropToTrace(s,y.properties.RESULT),t),T=e.object&&e.object.objectType?e.object.objectType:y.objectTypes.ACTIVITY,g(e.context,w.xapiValidationUtils.addPropToTrace(s,y.properties.CONTEXT),t,T),M(e,y.properties.TIMESTAMP,s,t),M(e,y.properties.STORED,s,t),C(e.authority,w.xapiValidationUtils.addPropToTrace(s,y.properties.AUTHORITY),t),V(e.version,w.xapiValidationUtils.addPropToTrace(s,y.properties.VERSION),t),R(e.attachments,w.xapiValidationUtils.addPropToTrace(s,y.properties.ATTACHMENTS),t),o(e,p,s,t),t):(t.push({trace:w.xapiValidationUtils.localTraceToString(s),message:j.xapiValidationErrors.STATEMENT_REF_MUST_NOT_BE_NULL_MAP_OBJECTS,level:j.xapiErrorLevels.MUST_VIOLATION}),t)}function b(e){var i;return i=[],f(e,y.properties.STATEMENT,i,!1),a(e,i)}function h(e){var i;if(void 0===e)return t(null,{trace:y.properties.STATEMENT,message:j.xapiValidationErrors.STATEMENT_ARGUMENT_MUST_BE_PROVIDED,level:j.xapiErrorLevels.MUST_VIOLATION});if(null===e)return t(null,{trace:y.properties.STATEMENT,message:j.xapiValidationErrors.STATEMENT_MUST_NOT_BE_NULL,level:j.xapiErrorLevels.MUST_VIOLATION});if(w.xapiValidationUtils.isString(e)){try{if(i=JSON.parse(e),null===i||!w.xapiValidationUtils.isObject(i)||w.xapiValidationUtils.isArray(i))return t(i,{trace:y.properties.STATEMENT,message:j.xapiValidationErrors.STATEMENT_MUST_BE_PARSED_CORRECTLY,level:j.xapiErrorLevels.MUST_VIOLATION})}catch(e){return t(i,{trace:y.properties.STATEMENT,message:j.xapiValidationErrors.INVALID_JSON+": "+e.message,level:j.xapiErrorLevels.MUST_VIOLATION})}return b(i)}return w.xapiValidationUtils.isObject(e)&&!w.xapiValidationUtils.isArray(e)?b(e):t(null,{trace:y.properties.STATEMENT,message:j.xapiValidationErrors.STATEMENT_ARGUMENT_IS_NOT_VALID,level:j.xapiErrorLevels.MUST_VIOLATION})}function G(e){return e[Y.dateFormatRegexPositions.ZONE]||e[Y.dateFormatRegexPositions.RELATIVE_TIME]&&e[Y.dateFormatRegexPositions.TIME_ZONE_HOUR]}Object.defineProperty(r,"__esModule",{value:!0}),r.validateStatement=void 0;var y=e("./constants/properties"),H=e("./constants/whitelists"),j=e("./constants/errors"),Y=e("./constants/regex"),X=e("./constants/interaction-types"),J=e("./constants/general"),w=e("./utils/utils");r.validateStatement=h},{"./constants/errors":1,"./constants/general":2,"./constants/interaction-types":3,"./constants/properties":4,"./constants/regex":5,"./constants/whitelists":6,"./utils/utils":7}]},{},[8])(8)});
//# sourceMappingURL=maps/xapiValidator.min.js.map
